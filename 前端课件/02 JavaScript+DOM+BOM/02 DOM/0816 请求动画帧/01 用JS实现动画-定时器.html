<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
		<meta name="author" content="金西振" />
		<title></title>
		<style>
			.outer {
				width: 100px;
				height: 100px;
				background-color: blue;
				position: relative;
			}
			.box {
				width: 100px;
				height: 100px;
				background-color: red;
				/* transform: translateX(0); */
				position: absolute;
				left: 0;
				top: 0;
			}
			/* 关键帧动画 */
			/* .outer .box {
				animation: move 5s 1 linear forwards;
			}
      @keyframes move {
        from {
          transform: translateX(0);
        }
        to {
          transform: translateX(600px);
        }
      } */
			/* 过渡动画 */
			/* .box {
				transition: all 0.5s;
			}
			.outer:hover .box {
				transform: translateX(600px);
			} */
		</style>
	</head>
	<body>
		<button>开始动画</button>
		<div class="outer">
			<div class="box"></div>
		</div>
		<script>
			// JS动画：使用js代码控制元素样式的改变，让元素的样式改变添加一个间隔时间，就会实现一种动画的效果

      // 1、使用定时器实现动画，动画效果可能出现卡顿、抖动等效果不流畅的现象，原因使用定时器是一种异步任务，需要等待同步任务执行完毕，如果定时器的间隔时间小于屏幕的刷新时间，可能造成丢帧的现象

      // 屏幕刷新时间：以60Hz电脑的刷新率为例，表示1秒中刷新60次，刷新一次时间是1/60 秒，算出来是16.7毫秒

			var btn = document.querySelector('button');
			var box = document.querySelector('.box');

			var left = 0;
			var timer = 0;
      console.log(box.offsetLeft);

			btn.onclick = function () {
				if (timer) {
					return;
				}

        timer = setTimeout(move, 1000/60);
        function move(){
          left += 20;
					box.style.left = left + 'px';

          timer = setTimeout(move, 1000/60);
          if (left >= 600) {
            clearInterval(timer);
            timer = null;
          }
        }

			};

      
			// btn.onclick = function () {
			// 	if (timer) {
			// 		return;
			// 	}
			// 	timer = setInterval(function () {
			// 		left += 20;
			// 		box.style.left = left + 'px';
      //     // console.log(box.offsetLeft);
      //     // box.style.transform = 'rotate(' + left + 'deg)';
      //     if (left >= 600) {
      //       clearInterval(timer);
      //       timer = null;
      //     }
			// 	}, 1000/60);
			// };

      


      // var speed = -1;
			// var timer = 0;
      // console.log(box.offsetLeft);
			// btn.onclick = function () {
			// 		box.style.left = box.offsetLeft + speed + 'px';
      //     console.log(box.offsetLeft);
			// };

    
		</script>
	</body>
</html>
