#  定位的使用

定位允许您从正常的文档流布局中取出元素，并使它们具有不同的行为，例如放在另一个元素的上面压住其他盒子，让盒子自由的在某个盒子内移动位置或者始终固定在浏览器视窗内的某个位置。

定位是常用的布局方式。

# 定位的组成

**定位**：将盒子定在某一个位置，所以**定位也是在摆放盒子，** **按照定位的方式移动盒子。**

定位 = 定位模式 + 边偏移 。

- 定位模式：用于指定一个元素在文档中的定位方式。

- 边偏移：则决定了该元素的最终位置。

## 定位模式

定位模式决定元素的定位方式 ，它通过 CSS 的 position 属性来设置，一共有5种定位方式，即`position`属性主要有五个值。

| 取值                 | 解释                   |
| -------------------- | ---------------------- |
| position: **static**; | 静态定位，默认值       |
| position: **relative**; | 相对定位               |
| position: **absolute**;     | 绝对定位               |
| position: **fixed**;        | 固定位置               |
| position: ==**sticky**==;  | 粘性定位，CSS3新增属性 |

## 边偏移

边偏移就是定位的盒子移动到最终位置。有 top、bottom、left 和 right 4 个属性。定位的盒子有了边偏移才有价值。 一般情况下，凡是有定位地方必定有边偏移。

| 边偏移属性 | 示例           | 描述                                                     |
| ---------- | :------------- | -------------------------------------------------------- |
| top      | `top: 80px;`  | **顶端**偏移量，定义元素相对于其父元素**上边线的距离**。 |
| bottom   | `bottom: 80px;` | **底部**偏移量，定义元素相对于其父元素**下边线的距离**。 |
| left     | `left: 80px;`  | **左侧**偏移量，定义元素相对于其父元素**左边线的距离**。 |
| right    | `right: 80px;` | **右侧**偏移量，定义元素相对于其父元素**右边线的距离**   |

## 边偏移属性的属性值

| 值     | 描述                                               |
| :----- | :------------------------------------------------- |
| auto   | 默认值。通过浏览器计算左边缘的位置。               |
| %      | 设置以包含元素的百分比计的左边位置。可使用负值。   |
| length | 使用 px、cm 等单位设置元素的左边位置。可使用负值。 |

# 静态定位 static

`static`是`position`属性的默认值。如果省略`position`属性，浏览器就认为该元素是`static`定位。

这时，浏览器会按照源码的顺序，决定每个元素的位置，这称为"正常的页面流"。每个块级元素占据自己的区块（block），元素与元素之间不产生重叠，这个位置就是元素的默认位置。

语法：`选择器 { position: static; }`

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111720.jpg" alt="bg2019111720" style="zoom: 67%;" />

注意，`static`定位所导致的元素位置，是浏览器自主决定的（按照文档流摆放标签），所以这时`top`、`bottom`、`left`、`right`这四个属性无效。

# relative，absolute，fixed

`relative`、`absolute`、`fixed`这三个属性值有一个共同点，都是相对于某个基点的定位，不同之处仅仅在于基点不同。所以，只要理解了它们的基点是什么，就很容易掌握这三个属性值。

## 相对定位 relative

`relative`表示，相对于默认位置（即`static`时的位置：它原来的位置）进行偏移，即定位基点是元素的默认位置。

### 语法

`选择器 { position: relative; }`

`relative` 必须搭配`top`、`bottom`、`left`、`right`这四个属性一起使用，用来指定偏移的方向和距离。

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111721.jpg" style="zoom: 80%;" />

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111722.jpg" alt="bg2019111722" style="zoom:67%;" />

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111723.jpg" alt="bg2019111723" style="zoom: 80%;" />

### 相对定位的特点

- 相对定位是相对于自己原来的位置来移动位置的

- 相对定位不会脱离文档流，原来在标准流的位置继续占有，后面的盒子仍然以标准流的方式对待它

## 绝对定位 absolute

`absolute`表示，相对于上级元素（一般是父元素）进行偏移，即定位基点是父元素。

它有一个重要的限制条件：定位基点（一般是父元素）不能是`static`定位（必须是 relative、absolute、fixed、sticky之一），否则定位基点就会变成整个网页的根元素`html`。

### 语法

`选择器 { position: absolute; }`

`absolute`定位也必须搭配`top`、`bottom`、`left`、`right`这四个属性一起使用。

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111801.jpg" alt="bg2019111801" style="zoom: 67%;" />

### 绝对定位的特点

- 如果没有父级元素或者父级元素没有定位，则以html标签为基点移动位置。
- 如果父级元素有定位（相对、绝对、固定、粘性定位），则以最近一级有定位的父级元素为基点移动位置。
- 绝对定位的元素会脱离文档流，不再占有原先的位置

- 绝对定位其偏移值是从包含块的 `padding` 区域开始计算的
- 行内元素添加绝对定位，可以直接设置高度和宽度。
- 块级元素添加绝对定位，如果不给宽度或者高度，默认大小是内容的大小。

- 脱离文档流的盒子不会触发外边距塌陷，浮动元素、绝对定位、固定定位元素的都不会触发外边距合并的问题

常用实现效果：常用于一个元素需要覆盖在另一个元素上显示的时候使用，子绝父相的使用

### 子绝父相的由来

子绝父相：子级是绝对定位的话，父级要用相对定位。

- 子级绝对定位，不会占有位置，可以放到父盒子里面的任何一个地方，不会影响其他的兄弟盒子。 
- 父盒子需要加定位，限制子盒子在父盒子内显示。
- 父盒子布局时，需要占有位置，因此父级只能是相对定位。 

这就是子绝父相的由来，所以相对定位经常用来作为绝对定位的父级。

当然，子绝父相不是永远不变的，如果父元素不需要占有位置，子绝父绝也会遇到，在开发中要根据实际情况灵活运用。

## 固定定位 fixed 

`fixed`表示，相对于视口（viewport，浏览器窗口）进行偏移，即定位基点是浏览器窗口（浏览器的可视页面）。这会导致元素的位置不随页面滚动而变化，好像固定在网页上一样。

### 语法

`选择器 { position: fixed; }`

它如果搭配`top`、`bottom`、`left`、`right`这四个属性一起使用，表示元素的初始位置是基于视口计算的，否则初始位置就是元素的默认位置。

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/bg2019111802.jpg" alt="bg2019111802" style="zoom:67%;" />

### 固定定位的特点

- 以浏览器的可视窗口为基点移动元素
- 定位基点跟父元素没有任何关系
- 固定定位的元素页面发生滚动时不随滚动条滚动
- 固定定位不在占有原先的位置，脱离文档流
- 行内元素添加固定定位，可以直接设置高度和宽度。
- 块级元素添加固定定位，如果不给宽度或者高度，默认大小是内容的大小。
- 脱离文档流的盒子不会触发外边距塌陷，浮动元素、绝对定位、固定定位元素的都不会触发外边距合并的问题

常见效果：导航栏的固定位置、右侧边栏的固定位置等

### 固定定位小技巧

在页面中经常遇到把工具栏定位在版心（浏览器可视区的正中的位置）右侧或者左侧的位置，比如京东首页右侧边栏：

<img src="https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211030215302562.png" alt="image-20211030215302562" style="zoom:50%;" />

实现步骤：

1. 让固定定位的盒子 left: 50%; 走到浏览器版心位置。

2. 让固定定位的盒子 margin-left: 版心宽度的一半距离。 多走版心宽度的一半位置就可以让固定定位的盒子贴着版心右侧对齐了。

```css
.main{
    width: 1190px;
    margin: auto;
}
.box{
    width: 58px;
    height: 300px;
    position: fixed;
    top: 75px;
    /* left: calc(50% + 1190px/2 + 20px); */
    left: 50%;
    margin-left: calc(1190px/2 + 20px);
}
```

固定在版心**右侧**：使用**固定位置配合left** 或者 **固定位置配合left+margin-left** 实现

固定在版心**左侧**：使用**固定位置配合right** 或者 **固定位置配合right+margin-right** 实现

# 粘性定位 ==sticky==

`sticky`跟前面四个属性值都不一样，它会产生动态效果，很像`relative`和`fixed`的结合：一些时候是`relative`定位（定位基点是自身默认位置），另一些时候自动变成`fixed`定位（定位基点是视口）。

## 语法

`选择器 { position: sticky; top: 10px; }`

`sticky`能够形成"动态固定"的效果。比如，百度新闻首页的导航栏，初始加载时在自己的默认位置（`relative`定位）。

![image-20211102223329759](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211102223329759.png)

页面向下滚动时，工具栏变成固定位置，始终停留在页面头部（`fixed`定位）。

![image-20211102223408248](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211102223408248.png)



等到页面重新向上滚动回到原位，工具栏也会回到默认位置。

`sticky`生效的前提是，必须搭配`top`、`bottom`、`left`、`right`这四个属性一起使用，不能省略，否则等同于`relative`定位，不产生"动态固定"的效果。原因是这四个属性用来定义"偏移距离"，浏览器把它当作`sticky`的生效门槛。

它的具体规则是，当页面滚动，父元素开始脱离视口时（即部分不可见），只要与`sticky`元素的距离达到生效门槛，`relative`定位自动切换为`fixed`定位；等到父元素完全脱离视口时（即完全不可见），`fixed`定位自动切换回`relative`定位。

注意，除了已被淘汰的 IE 以外，其他浏览器目前都支持`sticky`。但是，Safari 浏览器需要加上浏览器前缀`-webkit-`。

## 粘性定位的使用条件

- 父元素不能overflow:hidden或者overflow:auto属性。
- 必须指定top、bottom、left、right4个值之一，否则只会处于相对定位
- 父元素的高度不能低于sticky元素的高度
- sticky元素仅在其父元素内生效

## 粘性定位的特点

- 以浏览器的可视窗口为参照点移动元素（固定定位特点）
- 粘性定位占有原先的位置（相对定位特点）
- 必须添加 top 、left、right、bottom 其中一个才有效

# top/right/bottom/left的百分比值

- top 用百分比来定义距离顶部的偏移量。百分比参照包含块的高度。可以为负值。
- right 用百分比来定义距离右边的偏移量。百分比参照包含块的宽度。可以为负值。
- bottom 用百分比来定义距离底部的偏移量。百分比参照包含块的高度。可以为负值。
- left 用百分比来定义距离左边的偏移量。百分比参照包含块的宽度。可以为负值。

# 定位对定宽居中的影响

加了绝对定位或者固定位置的盒子不能通过 margin:0 auto 水平居中，可以通过以下方式解决

## 绝对定位和定宽居中

通过以下计算方法实现水平和垂直居中

### 方法一：

- left: 50%;：让盒子的左侧移动到父级元素的水平中心位置。 
- margin-left: -100px;：让盒子向左移动自身宽度的一半。

### 方法二：

- left: calc(50% - 100px); 让盒子的直接移动到父级元素的水平中心位置。 

### 方法三：

- left: 50%;：让盒子的左侧移动到父级元素的水平中心位置。 
- transform: translateX(-100px);：让盒子向左移动自身宽度的一半。

### 方法四：

- left: 0;
- right: 0;
- margin-left:auto;
- margin-right:auto;

更多方法等待大家去探索...

## 固定位置和定宽居中

```html
<div class="nav">
  <div class="container nav-list">
    <a href="#">HTML</a>
    <a href="#">CSS</a>
    <a href="#">JavaScript</a>
  </div>
</div>
```

如上述结构：

- 把固定位置的效果加到父元素.nav上
- 定宽居中的效果加到子元素.nav-list上

在开发中，定宽居中的效果非常多，定宽居中的效果一般在整个页面中上下内容的宽度都是固定的，推荐使用专门的类名 .contianer 来负责定宽居中的代码，这样可以很方便的管理定宽居中的元素

```css
.container {
    width: 960px;
    margin: 0 auto;
}
.nav {
    width: 100%;
    height: 50px;
    background-color: rgb(192, 135, 192);
    position: fixed;
    top: 0;
    left: 0;
}
.nav-list {
    line-height: 50px;
    background-color: lightskyblue;
}
```

# z-index 层叠顺序

在使用定位布局时，可能会出现盒子重叠的情况。此时，可以使用 z-index 来控制盒子的层叠顺序(z轴) 

## 语法

`选择器 { z-index: 1; }`

## 属性值

| 值     | 描述                               |
| :----- | :--------------------------------- |
| auto   | 默认。堆叠顺序与父元素相等。       |
| number | 设置元素的堆叠顺序。正整数或者负数 |

- 属性值可以是正整数、负整数或 0，默认值是auto，值越大盒子越靠上
- 标准文档流中，如果z-index属性值相同，则按照书写顺序，后面的元素会覆盖前面的元素，后来居上
- z-index只能在定位的元素上面生效：relative absolute fixed sticky

## 层级之间关系

- 亲兄弟元素：同一父级下面的子元素，谁的z-index值大，谁在上

- 父子元素：想让子元素的层级调整到父元素的下面，给子元素设置z-index负值，但是父元素不能设置有效的z-index 

- 堂兄弟元素：不同父级下面的子元素之间：要看父级和父级之间、父级和子级之间的具体值

# 鼠标样式 cursor 

cursor属性定义了鼠标指针放在一个元素边界范围内时所用的光标形状

## 语法

`选择器 { cursor: auto; }`

## 属性值

| 值              | 描述                                                         |
| :-------------- | :----------------------------------------------------------- |
| **url**         | 需使用的自定义光标的 URL。<br />注释：请在此列表的末端始终定义一种普通的光标，以防没有由 URL 定义的可用光标。 |
| **default**     | 默认光标（通常是一个箭头）                                   |
| **auto**        | 默认。浏览器设置的光标。                                     |
| crosshair       | 光标呈现为十字线。                                           |
| **pointer**     | 光标呈现为指示链接的指针（一只手）                           |
| **move**        | 此光标指示某对象可被移动。                                   |
| e-resize        | 此光标指示矩形框的边缘可被向右（东）移动。                   |
| ne-resize       | 此光标指示矩形框的边缘可被向上及向右移动（北/东）。          |
| nw-resize       | 此光标指示矩形框的边缘可被向上及向左移动（北/西）。          |
| n-resize        | 此光标指示矩形框的边缘可被向上（北）移动。                   |
| se-resize       | 此光标指示矩形框的边缘可被向下及向右移动（南/东）。          |
| sw-resize       | 此光标指示矩形框的边缘可被向下及向左移动（南/西）。          |
| s-resize        | 此光标指示矩形框的边缘可被向下移动（南）。                   |
| w-resize        | 此光标指示矩形框的边缘可被向左移动（西）。                   |
| **text**        | 此光标指示文本。                                             |
| wait            | 此光标指示程序正忙（通常是一只表或沙漏）。                   |
| help            | 此光标指示可用的帮助（通常是一个问号或一个气球）。           |
| **not-allowed** | 表示禁用的鼠标样式                                           |

# 全部定位属性

https://www.runoob.com/cssref/css-reference.html#positioning

# 练习

## 实现京东商品列表效果

![image-20211106112644656](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211106112644656.png)

## 实现京东首页轮播图静态效果

![image-20211106112727911](https://gitee.com/Jinxizhen/pic_resource/raw/master/images/image-20211106112727911.png)
